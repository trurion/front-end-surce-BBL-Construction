function getQueryVariable(query,variable){-1!==query.indexOf("?")&&(query=query.substring(query.indexOf("?")+1,query.length)),-1!==query.indexOf("#")&&(query=query.substring(0,query.indexOf("#")));for(var vars=query.split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]===variable)return pair[1]}return!1}function update_portfolio_pagination(current_page,post_count,offset,alter_url){jQuery.ajax({url:site_path+"/lib/portfolio.pagination.php",type:"POST",data:{current_page:current_page,portfolio_permalink:portfolio_permalink,meta_key:meta_key,meta_value:meta_value,post_count:post_count,offset:offset},dataType:"json",beforeSend:function(){jQuery(".portfolio-entry:hidden").remove(),jQuery(".portfolio-view_more").html('<span class="fa fa-spinner fa-spin"></span> Loading...')}}).done(function(data){if(0===data.error){if(6+24*(data.paged-1)<portfolio_count?jQuery(".portfolio-view_more").before(data.entries).attr("href",data.url).html('View More <span class="fa fa-caret-down"></span>'):jQuery(".portfolio-view_more").before(data.entries).remove(),Modernizr.history&&alter_url===!0){var new_url=data.url,split_point=new_url.lastIndexOf("/");new_url=new_url.substring(0,split_point),new_url=new_url+"?pp="+data.paged,history.pushState(null,null,new_url)}}else 1===data.error&&jQuery(".portfolio-view_more").before('<p class="error">'+data.message+"</p>")}).fail(function(jqXHR,textStatus,errorThrown){jQuery(".portfolio-view_more").before('<p class="error">'+textStatus+": "+errorThrown+"</p>")})}function update_callout_home(callout_id,transition_time){var image_preload,img_alt=home_callouts[callout_id].identifier.charAt(0).toUpperCase()+home_callouts[callout_id].identifier.slice(1);image_preload=window_width>=768?home_callouts[callout_id].load+".jpg":home_callouts[callout_id].load+"-mobile.jpg",jQuery("<img />").attr("src",image_preload).on("load",function(){var callout_target,callout_classes,callout_timer;jQuery(".callout-background_front").hasClass("callout-background_front_hidden")?(callout_target=jQuery(".callout-background_front"),callout_classes="callout-background callout-background_front callout-background_front_hidden",callout_timer=0):(callout_target=jQuery(".callout-background_back"),callout_classes="callout-background callout-background_back",callout_timer=501),jQuery(".callout-background_content").fadeOut(transition_time,function(){callout_target.removeClass().addClass(callout_classes+" bkgd-"+home_callouts[callout_id].identifier),jQuery(".callout-background_front").toggleClass("callout-background_front_hidden"),setTimeout(function(){jQuery(".callout-background_back").toggleClass("callout-background_back_visible")},callout_timer),jQuery(".callout-background_content").html('<img src="'+home_callouts[callout_id].image+'" alt="'+img_alt+'" /><p class="home-callout">'+home_callouts[callout_id].line+"</p>").fadeOut(0).delay(transition_time).fadeIn(transition_time,function(){jQuery(".callout-nav_current").removeClass("callout-nav_current"),jQuery(".callout-nav_container").children("a:eq("+callout_id+")").addClass("callout-nav_current")})})})}var current_photo=0,home_counter=0,home_timeout,site_path="/wp-content/themes/bbl",window_width=jQuery(window).width(),animating=!1;Modernizr.history&&(window.addEventListener("popstate",function(){var new_url=window.location.href,page_test=getQueryVariable(new_url,"pp"),portfolio_visible=jQuery(".portfolio-entry:visible").length,portfolio_total=jQuery(".portfolio-entry").length,visibility_offset=0;if(visibility_offset=portfolio_visible%24-6===0?24:(portfolio_visible-6)%24,jQuery.isNumeric(page_test))if(6===portfolio_total){var post_count_jump=24*(page_test-1);update_portfolio_pagination(page_test,post_count_jump,6,!1)}else 24*page_test>portfolio_visible?jQuery(".portfolio-entry").slice(portfolio_visible,portfolio_visible+visibility_offset).show():portfolio_visible>24*page_test&&jQuery(".portfolio-entry").slice(portfolio_visible-visibility_offset,portfolio_visible).hide();else portfolio_total>6&&jQuery(".portfolio-entry").slice(portfolio_visible-visibility_offset,portfolio_visible).hide()}),window.addEventListener("DOMContentLoaded",function(){document.getElementById("masthead-secondary_search_toggle").addEventListener("touchstart",function(ev){ev.stopPropagation(),ev.preventDefault()},!1)},!1)),jQuery(document).ready(function($){if($(".search-text-masthead").on("focus",function(){$(this).parent(".masthead-secondary_search").addClass("masthead-search_active")}).on("blur",function(){$(this).parent(".masthead-secondary_search").removeClass("masthead-search_active")}),$(".search-submit-masthead").on("click",function(ev){("SEARCH"===$(".search-text-masthead").val()||"Search"===$(".search-text-masthead").val()||""===$(".search-text-masthead").val())&&($(this).parent(".masthead-secondary_search").addClass("masthead-search_active"),ev.preventDefault())}),$("body").hasClass("home")&&(home_timeout=setInterval(function(){window_width=$(window).width();var previous_counter=home_counter;home_counter+=1,home_counter===home_callouts.length&&(home_counter=0),0===home_counter&&(previous_counter=home_callouts.length-1),update_callout_home(home_counter,250)},7e3)),$(".callout-nav_container").on("click","a",function(ev){var clicked_dot=$(this),new_callout=clicked_dot.attr("href");home_counter=getQueryVariable(new_callout,"c"),clearInterval(home_timeout),update_callout_home(home_counter,0),ev.preventDefault()}),$(".divisions-callout_content").on("mouseover","a",function(){if(window_width=$(window).width(),window_width>=768){$(this).parent(".divisions-callout_content").hasClass("divisions-callout_hover")||$(this).parent(".divisions-callout_content").addClass("divisions-callout_hover");var reveal_target=$(this).attr("class").substring(9),reveal_element=$(".reveal-"+reveal_target),animate_height=reveal_element.children("p").height();$(reveal_element).css({height:animate_height+"px"}).parent(".divisions-callout_reveal_wrap").css({height:animate_height+"px",top:"-"+animate_height+"px"})}}).on("mouseout","a",function(){window_width=$(window).width(),window_width>=768&&($(".divisions-callout_hover").removeClass("divisions-callout_hover"),$(".divisions-callout_reveal_wrap").css({height:"0px",top:"0px"}).children("div").css({height:"0px"}))}),$("body").hasClass("page-template-portfolio_category")&&$(".entry-content p").length>1){var animate_height=$(".entry-content p:eq(0)").outerHeight();$(".entry-content").css("height",animate_height+"px").after('<span class="portfolio-description_toggle portfolio-description_more"><a href="#">Read More <span class="fa fa-caret-down"></span></a></span>')}$(".page").on("click",".portfolio-description_toggle a",function(ev){var animate_height;$(this).parent(".portfolio-description_toggle").hasClass("portfolio-description_more")?(animate_height=$(".portfolio-category_description").innerHeight(),$(".portfolio-description_more").removeClass("portfolio-description_more").addClass("portfolio-description_less").html('<a href="#">Less <span class="fa fa-caret-up"></span></a>'),$(".entry-content").animate({height:animate_height+"px"},250)):$(this).parent(".portfolio-description_toggle").hasClass("portfolio-description_less")&&(animate_height=$(".entry-content p:eq(0)").outerHeight(),$(".entry-content").animate({height:animate_height+"px"},250,function(){$(".portfolio-description_less").removeClass("portfolio-description_less").addClass("portfolio-description_more").html('<a href="#">Read More <span class="fa fa-caret-down"></span></a>')})),ev.preventDefault()}),$(".portfolio-view_more").on("click",function(ev){var new_page=$(this).attr("href"),paged=[];paged=new_page.split("/portfolio/"),paged=paged[1].split("/");var current_page=paged[1];update_portfolio_pagination(current_page,24,"",!0),ev.preventDefault()}),$(".portfolio-photo_main").on("click",".portfolio-photo_arrow",function(ev){if(animating===!0)return!1;animating=!0;var photo_reference=$(this).attr("href");photo_reference=getQueryVariable(photo_reference,"ph");var direction=$(this).attr("class");direction=direction.split(" "),direction=direction[1].substring(22);var remove_class,remove_image,new_image=$(".portfolio-photo_thumb:eq("+photo_reference+")"),new_src=new_image.data("photo"),new_alt=new_image.children("img").attr("alt");$("<img />").attr("src",new_src).on("load",function(){new_image.addClass("portfolio-photo_thumb_active").siblings("a").removeClass("portfolio-photo_thumb_active"),"right"===direction?($(".portfolio-photo_main > img").after('<img src="'+new_src+'" alt="'+new_alt+'" class="portfolio-photo_next" />').css("left","-100%"),remove_class=$(".portfolio-photo_next"),remove_class.show(1).css("right","0"),remove_image=0):"left"===direction&&($(".portfolio-photo_main > img").before('<img src="'+new_src+'" alt="'+new_alt+'" class="portfolio-photo_prev" />').css("left","100%"),remove_class=$(".portfolio-photo_prev"),remove_class.show(1).css("left","0"),remove_image=1),setTimeout(function(){remove_class.removeAttr("style").removeClass(),$(".portfolio-photo_main > img:eq("+remove_image+")").remove(),current_photo=$(".portfolio-photo_thumb").index(new_image);var prev_photo=current_photo-1;0>prev_photo&&(prev_photo=photos_count-1);var next_photo=current_photo+1;next_photo>=photos_count&&(next_photo=0);var prev_link=$(".portfolio-photo_arrow_left").attr("href"),equal_check=prev_link.lastIndexOf("=");prev_link=prev_link.substring(0,equal_check+1)+prev_photo,$(".portfolio-photo_arrow_left").attr("href",prev_link);var next_link=$(".portfolio-photo_arrow_right").attr("href");equal_check=next_link.lastIndexOf("="),next_link=next_link.substring(0,equal_check+1)+next_photo,$(".portfolio-photo_arrow_right").attr("href",next_link),animating=!1},501)}),ev.preventDefault()}),$(".portfolio-photo_thumb_wrap").on("click",".portfolio-photo_thumb",function(ev){var new_image=$(this),new_src=new_image.data("photo"),new_alt=new_image.children("img").attr("alt");$("<img />").attr("src",new_src).on("load",function(){new_image.addClass("portfolio-photo_thumb_active").siblings("a").removeClass("portfolio-photo_thumb_active"),$(".portfolio-photo_main > img").attr("src",new_src).attr("alt",new_alt),current_photo=$(".portfolio-photo_thumb").index(new_image)}),ev.preventDefault()}),$("body").hasClass("singular-portfolio")&&($("#menu-item-141").addClass("current_page_item"),$("#menu-item-142").removeClass("current_page_item").removeClass("current_page_parent").removeClass("current_page_ancestor")),$(".featured-project_image").on("click",".project-arrow",function(ev){if(animating===!0)return!1;animating=!0;var project_reference=$(this).attr("href");project_reference=getQueryVariable(project_reference,"pr"),project_reference=Number(project_reference);var direction=$(this).attr("class");direction=direction.split(" "),direction=direction[1].substring(14);var remove_class,remove_image,new_src=featured_projects[project_reference].image,new_alt=featured_projects[project_reference].title,new_link=featured_projects[project_reference].link;$("<img />").attr("src",new_src).on("load",function(){"right"===direction?($(".featured-project_image_link").after('<a href="'+new_link+'" class="featured-project_image_link project-next"><img src="'+new_src+'" alt="'+new_alt+'" /></a>').css("left","-100%"),remove_class=$(".project-next"),remove_class.show(1).css("right","0"),remove_image=0):"left"===direction&&($(".featured-project_image_link").before('<a href="'+new_link+'" class="featured-project_image_link project-prev"><img src="'+new_src+'" alt="'+new_alt+'" /></a>').css("left","100%"),remove_class=$(".project-prev"),remove_class.show(1).css("left","0"),remove_image=1),setTimeout(function(){remove_class.removeAttr("style").removeClass("project-next project-prev"),$(".featured-project_image > .featured-project_image_link:eq("+remove_image+")").remove();var prev_project=project_reference-1;0>prev_project&&(prev_project=projects_count-1);var next_project=project_reference+1;next_project>=projects_count&&(next_project=0);var prev_link=$(".project-arrow_left").attr("href"),equal_check=prev_link.lastIndexOf("=");prev_link=prev_link.substring(0,equal_check+1)+prev_project,$(".project-arrow_left").attr("href",prev_link);var next_link=$(".project-arrow_right").attr("href");equal_check=next_link.lastIndexOf("="),next_link=next_link.substring(0,equal_check+1)+next_project,$(".project-arrow_right").attr("href",next_link),$(".featured-project_title").html(featured_projects[project_reference].title),$(".featured-project_details > p").eq("1").html(function(){var project_details="";return"undefined"!=typeof featured_projects[project_reference].location&&featured_projects[project_reference].title.length>0&&(project_details+="<strong>Location:</strong> "+featured_projects[project_reference].location),"undefined"!=typeof featured_projects[project_reference].size&&featured_projects[project_reference].size.length>0&&("undefined"!=typeof featured_projects[project_reference].location&&featured_projects[project_reference].title.length>0&&(project_details+="<br />"),project_details+="<strong>Square Footage:</strong> "+featured_projects[project_reference].size),project_details}),$(".featured-project_more > a").attr("href",featured_projects[project_reference].link),animating=!1},501)}),ev.preventDefault()}),$(".mobile-menu_trigger").on("click",function(ev){var mobile_menu_trigger=$(this),mobile_menu=$(".menu-container");if(mobile_menu_trigger.hasClass("mobile-menu_trigger_close"))mobile_menu.css("height","0px"),mobile_menu_trigger.removeClass("mobile-menu_trigger_close");else{var animate_height=mobile_menu.children(".menu").innerHeight()+mobile_menu.children(".search-form-mobile").innerHeight()+2;mobile_menu.css("height",animate_height+"px"),mobile_menu_trigger.addClass("mobile-menu_trigger_close")}ev.preventDefault()}),$(window).on("resize",function(){window_width=$(window).width(),$(".mobile-menu_trigger").hasClass("mobile-menu_trigger_close")&&window_width>=768&&($(".mobile-menu_trigger").removeClass("mobile-menu_trigger_close"),$(".menu-container").removeAttr("style"))}),$(".entry-content").on("click",".accordion-trigger",function(){var animate_height,accordion_trigger=$(this),accordion_number=accordion_trigger.attr("id").substr(18);accordion_trigger.hasClass("accordion-open")?(accordion_trigger.removeClass("accordion-open"),$(".accordion-content_"+accordion_number).css("height","0px")):(accordion_trigger.addClass("accordion-open"),animate_height=$(".accordion-content_"+accordion_number).children(".accordion-content_wrap").innerHeight(),$(".accordion-content_"+accordion_number).css("height",animate_height+"px"))}),$(".accordion-content").css("height","0px"),$("body").hasClass("page-template-leadership-team")&&$(".team-member_content").each(function(){var team_member_content=$(this);if(team_member_content.children("p").length>2){var animate_height,animate_text_height=team_member_content.children("h4").outerHeight(!0)+team_member_content.children("p:eq(0)").outerHeight(!0)+team_member_content.children("p:eq(1)").outerHeight(!0),animate_image_height=team_member_content.siblings("img").outerHeight(!0);animate_height=animate_text_height>animate_image_height?animate_text_height-15:animate_image_height-15,team_member_content.css("height",animate_height+"px").after('<span class="team-member-bio_toggle team-member-bio_more"><a href="#">Read More <span class="fa fa-caret-down"></span></a></span>'),team_member_content.parent(".team-member_wrap").css("padding-bottom","35px")}}),$(".page").on("click",".team-member-bio_toggle a",function(ev){var animate_height,team_member_toggle=$(this).parent(".team-member-bio_toggle");team_member_toggle.hasClass("team-member-bio_more")?(animate_height=team_member_toggle.siblings(".team-member_content").children("h4").outerHeight(!0),team_member_toggle.siblings(".team-member_content").children("p").each(function(){animate_height+=$(this).outerHeight(!0)}),team_member_toggle.removeClass("team-member-bio_more").addClass("team-member-bio_less").html('<a href="#">Less <span class="fa fa-caret-up"></span></a>'),team_member_toggle.siblings(".team-member_content").animate({height:animate_height+"px"},250)):team_member_toggle.hasClass("team-member-bio_less")&&(animate_height=team_member_toggle.siblings(".team-member_content").children("h4").outerHeight(!0)+team_member_toggle.siblings(".team-member_content").children("p:eq(0)").outerHeight(!0)+team_member_toggle.siblings(".team-member_content").children("p:eq(1)").outerHeight(!0),team_member_toggle.siblings(".team-member_content").animate({height:animate_height+"px"},250,function(){team_member_toggle.removeClass("team-member-bio_less").addClass("team-member-bio_more").html('<a href="#">Read More <span class="fa fa-caret-down"></span></a>')})),ev.preventDefault()}),$("body").hasClass("singular-leadership_team")&&($("#menu-item-139").addClass("current_page_item"),$("#menu-item-142").removeClass("current_page_item").removeClass("current_page_parent").removeClass("current_page_ancestor")),$(".page").on("click",".process-step_toggle, .process-step_header, .process-step_icon",function(ev){var animate_height,process_step_toggle;process_step_toggle=$(this).hasClass("process-step_toggle")?$(this):$(this).siblings(".process-step_toggle"),process_step_toggle.hasClass("process-step_more")?(animate_height=process_step_toggle.siblings(".process-step_content").children("div").innerHeight()+20,process_step_toggle.removeClass("process-step_more").addClass("process-step_less").html('<a href="#">Less <span class="fa fa-caret-up"></span></a>'),process_step_toggle.siblings(".process-step_content").animate({height:animate_height+"px"},250)):process_step_toggle.hasClass("process-step_less")&&process_step_toggle.siblings(".process-step_content").animate({height:"0px"},250,function(){process_step_toggle.removeClass("process-step_less").addClass("process-step_more").html('<a href="#">Read More <span class="fa fa-caret-down"></span></a>')}),ev.preventDefault()})});
//# sourceMappingURL=scripts.min.js.map